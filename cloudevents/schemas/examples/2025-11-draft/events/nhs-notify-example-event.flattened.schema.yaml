$id: https://notify.nhs.uk/cloudevents/schemas/examples/2025-11-draft/events/nhs-notify-example-event.flattened.schema.json
$schema: https://json-schema.org/draft/2020-12/schema
title: Example Event
description: Example  event
type: object
allOf:
  - $anchor: nhs-notify-profile
    $schema: https://json-schema.org/draft/2020-12/schema
    title: NHS Notify CloudEvents Profile
    description: NHS Notify profile for CloudEvents 1.0 including additional governance and tracing attributes.
    type: object
    additionalProperties: false
    $comment: |
      id includes the published date.
      CloudEvents allows arbitrary extension attributes.
      NHS profile: time (occurred-at) is mandatory though optional in CloudEvents spec.
    properties:
      specversion:
        type: string
        const: "1.0"
        description: CloudEvents specification version (fixed to 1.0).
        examples:
          - "1.0"
        $comment: "CloudEvents version used. Core attributes: specversion,id,source,type (+ optional subject,time,datacontenttype,dataschema,data). Ref: CloudEvents core spec."
      id:
        type: string
        format: uuid
        minLength: 1
        description: Unique identifier for this event instance (UUID).
        examples:
          - 6f1c2a53-3d54-4a0a-9a0b-0e9ae2d4c111
        $comment: Unique per (source,id). This should be a randomly generated guid that represents the id of the event itself.
      source:
        type: string
        pattern: ^/nhs/england/notify/(production|staging|development|uat)/(primary|secondary|dev-[0-9]+)/(data-plane|control-plane)(?:/[a-z0-9-]+)*$
        minLength: 40
        format: uri-reference
        description: "Logical event producer path: /nhs/england/notify/{environment}/{instance}/{plane}[/{service}...] where environment=production|staging|development|uat, instance=primary|secondary|dev-{digits}, plane=data-plane|control-plane, and optional service/lowercase tokens follow."
        examples:
          - /nhs/england/notify/production/primary/data-plane/ordering
          - /nhs/england/notify/staging/secondary/control-plane/audit
          - /nhs/england/notify/development/dev-12345/data-plane/ordering
        $comment: "Segments: /nhs/england/notify/{environment}/{instance}/{plane}[/{token}...]; environment in (production|staging|development|uat); instance in (primary|secondary|dev-<digits> for ephemeral/dev sandboxes); plane in (data-plane|control-plane); subsequent optional segments: lowercase alphanumeric or hyphen; no trailing slash."
      subject:
        type: string
        pattern: ^(?:[a-z0-9-]+)(?:/[a-z0-9-]+)*$
        minLength: 5
        format: uri-reference
        description: Resource path (no leading slash) within the source made of lowercase segments separated by '/'.
        examples:
          - customer/920fca11-596a-4eca-9c47-99f624614658/order/769acdd4-6a47-496f-999f-76a6fd2c3959/item/4f5e17c0-ec57-4cee-9a86-14580cf5af7d
        $comment: "URI path: must not start with '/', only lowercase alphanumeric and hyphen segments separated by '/', must not end with '/'."
      type:
        type: string
        minLength: 1
        allOf:
          - name: NHS Notify versioned event type pattern
            type: string
            pattern: ^uk\.nhs\.notify\.[a-z0-9]+(?:\.[a-z0-9]+)*\.v[0-9]+$
            description: Versioned event type (uk.nhs.notify.*.<segments>.vN) using reverse-DNS style segments ending with .v<digits> (e.g. .v1, .v10).
            examples:
              - uk.nhs.notify.ordering.order.read.v1
            $comment: "Segments: lowercase a-z0-9; final segment is version marker v<digits>. Allows arbitrary positive integer (no leading zero rule enforced)."
          - name: Disallow 'completed' token
            type: string
            not:
              pattern: (?:^|\.)completed(?:\.|$)
            description: Disallow ambiguous past tense token 'completed'. Use a domain-specific verb like read, created, published.
          - name: Disallow 'finished' token
            type: string
            not:
              pattern: (?:^|\.)finished(?:\.|$)
            description: Disallow 'finished' which is temporal and ambiguous; choose a workflow-specific terminal verb.
          - name: Disallow 'updated' token
            type: string
            not:
              pattern: (?:^|\.)updated(?:\.|$)
            description: Disallow 'updated'; prefer a concrete action (e.g. order.modified.v1 -> order.change.applied).
          - name: Disallow 'changed' token
            type: string
            not:
              pattern: (?:^|\.)changed(?:\.|$)
            description: Disallow vague 'changed'; specify the nature of the change (e.g. status.changed -> status.transitioned).
          - name: Disallow 'processed' token
            type: string
            not:
              pattern: (?:^|\.)processed(?:\.|$)
            description: Disallow 'processed'; state WHAT happened, not that a process occurred.
          - name: Disallow 'handled' token
            type: string
            not:
              pattern: (?:^|\.)handled(?:\.|$)
            description: Disallow 'handled'; overly generic and not business meaningful.
          - name: Disallow 'status' token
            type: string
            not:
              pattern: (?:^|\.)status(?:\.|$)
            description: Disallow bare 'status'; event types should represent a domain occurrence, not a generic label.
          - name: Disallow 'started' token
            type: string
            not:
              pattern: (?:^|\.)started(?:\.|$)
            description: Disallow 'started'; prefer a specific lifecycle action (e.g. session.opened).
          - name: Disallow 'failed' token
            type: string
            not:
              pattern: (?:^|\.)failed(?:\.|$)
            description: Disallow 'failed'; model the concrete failure (e.g. payment.authorization.failed -> payment.authorization.rejected).
        description: Versioned event type (uk.nhs.notify.*.<segments>.vN) using reverse-DNS style; final segment MUST be .v<digits>; ambiguous verbs (completed, finished, updated, changed, processed, handled, status, started, failed) disallowed.
        examples:
          - uk.nhs.notify.ordering.order.read.v1
        $comment: "NHS naming: lower-dot namespaced; version suffix required (.v<digits>); banned tokens anywhere before version: completed, finished, updated, changed, processed, handled, status, started, failed."
      time:
        type: string
        format: date-time
        description: Timestamp when the event occurred (RFC 3339).
        examples:
          - "2025-10-01T10:15:30.000Z"
        $comment: RFC3339 UTC occurred-at (REQUIRED in NHS profile).
      datacontenttype:
        type: string
        const: application/json
        description: Media type for the data field (fixed to application/json).
        examples:
          - application/json
        $comment: Usually application/json.
      dataschema:
        type: string
        description: URI of a schema that describes the event payload (notify-payload).
        examples:
          - https://nhsdigital.github.io/nhs-notify-standards/cloudevents/nhs-notify-example-event-data.schema.json
        $comment: URI to event payload schema.
      data:
        type: object
        description: Container object wrapping the structured Notify payload.
        examples:
          - notify-payload:
              notify-data:
                nhsNumber: "9434765919"
              notify-metadata:
                teamResponsible: Team 1
                notifyDomain: Ordering
                version: 1.3.0
        $comment: Domain payload (arbitrary JSON value).
      traceparent:
        type: string
        minLength: 1
        pattern: ^00-[0-9a-f]{32}-[0-9a-f]{16}-[0-9a-f]{2}$
        description: W3C Trace Context traceparent header value.
        examples:
          - 00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01
        $comment: W3C Trace Context traceparent (required when tracing used).
      tracestate:
        type: string
        description: Optional W3C Trace Context tracestate header value.
        examples:
          - rojo=00f067aa0ba902b7,congo=t61rcWkgMzE
        $comment: W3C Trace Context tracestate (optional).
      partitionkey:
        type: string
        minLength: 1
        maxLength: 64
        pattern: ^[a-z0-9-]+$
        description: Partition / ordering key (lowercase alphanumerics and hyphen, 1-64 chars).
        examples:
          - customer-920fca11
        $comment: Non-empty partition key for scaling / causal grouping. Must be 1-64 characters, only lowercase letters, numbers, and hyphen.
      recordedtime:
        type: string
        format: date-time
        description: Timestamp when the event was recorded/persisted (should be >= time).
        examples:
          - "2025-10-01T10:15:30.250Z"
        $comment: Bitemporal created-at; should be >= time.
      sampledrate:
        type: integer
        minimum: 1
        description: "Sampling factor: number of similar occurrences this event represents."
        examples:
          - 5
        $comment: Integer > 0 indicating how many similar occurrences this event represents.
      sequence:
        type: string
        pattern: ^\d{20}$
        description: Zero-padded 20 digit numeric sequence (lexicographically sortable).
        examples:
          - "00000000000000000042"
        $comment: Lexicographically comparable ordering string per source. Must be a string of exactly 20 digits, left-padded with zeros, representing a 64-bit unsigned integer.
      severitytext:
        type: string
        enum:
          - TRACE
          - DEBUG
          - INFO
          - WARN
          - ERROR
          - FATAL
        description: Log severity level name.
        examples:
          - DEBUG
        $comment: Severity text (TRACE, DEBUG, INFO, WARN, ERROR, FATAL, etc.).
      severitynumber:
        type: integer
        minimum: 0
        maximum: 5
        description: Numeric severity (TRACE=0, DEBUG=1, INFO=2, WARN=3, ERROR=4, FATAL=5).
        examples:
          - 1
        $comment: Numeric severity corresponding to severitytext (TRACE=0..FATAL=5).
      dataclassification:
        type: string
        enum:
          - public
          - internal
          - confidential
          - restricted
        description: Data sensitivity classification.
        examples:
          - restricted
        $comment: Data classification e.g. public|internal|confidential|restricted.
      dataregulation:
        type: string
        enum:
          - GDPR
          - HIPAA
          - PCI-DSS
          - ISO-27001
          - NIST-800-53
          - CCPA
        description: Regulatory regime tag applied to this data.
        examples:
          - ISO-27001
        $comment: Regulation tags e.g. GDPR, HIPAA.
      datacategory:
        type: string
        enum:
          - non-sensitive
          - standard
          - sensitive
          - special-category
        description: Data category classification (e.g. standard, special-category).
        examples:
          - sensitive
        $comment: "Example: special-category (GDPR), phi (HIPAA)."
    required:
      - specversion
      - id
      - source
      - subject
      - type
      - time
      - recordedtime
      - severitynumber
      - traceparent
      - data
    dependentRequired:
      severitynumber:
        - severitytext
    allOf:
      - if:
          properties:
            source:
              pattern: ^/nhs/england/notify/(production|staging|development|uat)/(primary|secondary|dev-[0-9]+)/data-plane
          required:
            - source
        then:
          properties:
            subject:
              pattern: ^customer/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}(?:/(?:[a-z0-9-]+|[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}))*$
              $comment: When source is /data-plane..., subject must start with customer/{uuid} and may have further segments which are either lowercase tokens or UUIDs.
              description: "Subject path for data-plane events: customer/{uuid}[/...]."
          required:
            - subject
      - if:
          properties:
            severitytext:
              const: TRACE
          required:
            - severitytext
        then:
          properties:
            severitynumber:
              const: 0
          required:
            - severitynumber
      - if:
          properties:
            severitytext:
              const: DEBUG
          required:
            - severitytext
        then:
          properties:
            severitynumber:
              const: 1
          required:
            - severitynumber
      - if:
          properties:
            severitytext:
              const: INFO
          required:
            - severitytext
        then:
          properties:
            severitynumber:
              const: 2
          required:
            - severitynumber
      - if:
          properties:
            severitytext:
              const: WARN
          required:
            - severitytext
        then:
          properties:
            severitynumber:
              const: 3
          required:
            - severitynumber
      - if:
          properties:
            severitytext:
              const: ERROR
          required:
            - severitytext
        then:
          properties:
            severitynumber:
              const: 4
          required:
            - severitynumber
      - if:
          properties:
            severitytext:
              const: FATAL
          required:
            - severitytext
        then:
          properties:
            severitynumber:
              const: 5
          required:
            - severitynumber
    examples:
      - pecversion: "1.0"
        id: 6f1c2a53-3d54-4a0a-9a0b-0e9ae2d4c111
        source: /data-plane/ordering
        subject: customer/920fca11-596a-4eca-9c47-99f624614658/order/769acdd4-6a47-496f-999f-76a6fd2c3959/item/4f5e17c0-ec57-4cee-9a86-14580cf5af7d
        type: uk.nhs.notify.ordering.order.read
        time: "2025-10-01T10:15:30.000Z"
        recordedtime: "2025-10-01T10:15:30.250Z"
        traceparent: 00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01
        tracestate: rojo=00f067aa0ba902b7,congo=t61rcWkgMzE
        partitionkey: customer-920fca11
        sequence: "00000000000000000042"
        severitytext: DEBUG
        severitynumber: 1
        datacontenttype: application/json
        dataschema: https://nhsdigital.github.io/nhs-notify-standards/cloudevents/nhs-notify-example-event-data.schema.yaml
        dataclassification: restricted
        dataregulation: ISO-27001
        datacategory: sensitive
        sampledrate: 5
        data:
          notify-payload:
            notify-data:
              nhsNumber: "9434765919"
            notify-metadata:
              teamResponsible: Team 1
              notifyDomain: Ordering
              version: 1.3.0
properties:
  type:
    type: string
    const: uk.nhs.notify.example.order.read.v1
    description: Concrete versioned event type string for this example event (.vN suffix).
    examples:
      - uk.nhs.notify.example.order.read.v1
    minLength: 1
    allOf:
      - name: NHS Notify versioned event type pattern
        type: string
        pattern: ^uk\.nhs\.notify\.example\.[a-z0-9]+(?:\.[a-z0-9]+)*\.v[0-9]+$
  source:
    type: string
    description: Event source for ordering domain examples.
    examples:
      - /nhs/england/notify/production/primary/data-plane/example
    allOf:
      - type: string
        pattern: ^/nhs/england/notify/(production|staging|development|uat)/(primary|secondary|dev-[0-9]+)/data-plane/example
        description: "Original pattern: Event source for ordering domain examples."
      - type: string
        pattern: ^/nhs/england/notify/(production|staging|development|uat)/(primary|secondary|dev-[0-9]+)/(data-plane|control-plane)/example
        description: Merged pattern constraint
    minLength: 40
    format: uri-reference
  subject:
    type: string
    pattern: ^customer/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/order/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/item/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$
    description: Path in the form customer/{id}/order/{id}/item/{id} where each {{id}} is a UUID (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).
    examples:
      - customer/920fca11-596a-4eca-9c47-99f624614658/order/769acdd4-6a47-496f-999f-76a6fd2c3959/item/4f5e17c0-ec57-4cee-9a86-14580cf5af7d
  dataschema:
    type: string
    const: ../data/nhs-notify-example-event-data.schema.json
    description: Canonical URI of the example event's data schema.
    examples:
      - nhs-notify-example-event-data.schema.json
  data:
    description: Example payload wrapper containing notify-payload.
    $schema: https://json-schema.org/draft/2020-12/schema
    title: Example data type
    type: object
    additionalProperties: false
    properties:
      weather:
        $schema: https://json-schema.org/draft/2020-12/schema
        $schemaVersion: 0.0.3
        modelTags: ""
        title: " - Weather Forecast schema"
        description: A harmonised description of a Weather Forecast
        type: object
        allOf:
          - type: object
            properties:
              id:
                anyOf:
                  - type: string
                    minLength: 1
                    maxLength: 256
                    pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
                    description: Property. Identifier format of any NGSI entity
                  - type: string
                    format: uri
                    description: Property. Identifier format of any NGSI entity
                description: Relationship. Unique identifier of the entity
              dateCreated:
                type: string
                format: date-time
                description: Property. Entity creation timestamp. This will usually be allocated by the storage platform
              dateModified:
                type: string
                format: date-time
                description: Property. Timestamp of the last modification of the entity. This will usually be allocated by the storage platform
              source:
                type: string
                description: Property. A sequence of characters giving the original source of the entity data as a URL. Recommended to be the fully qualified domain name of the source provider, or the URL to the source object
              name:
                type: string
                description: Property. The name of this item
              alternateName:
                type: string
                description: Property. An alternative name for this item
              description:
                type: string
                description: Property. A description of this item
              dataProvider:
                type: string
                description: Property. A sequence of characters identifying the provider of the harmonised data entity
              owner:
                type: array
                description: Property. A List containing a JSON encoded sequence of characters referencing the unique Ids of the owner(s)
                items:
                  $ref: "#/properties/data/properties/weather/allOf/0/properties/id"
              seeAlso:
                oneOf:
                  - type: array
                    minItems: 1
                    items:
                      type: string
                      format: uri
                  - type: string
                    format: uri
                description: Property. list of uri pointing to additional resources about the item
          - type: object
            properties:
              location:
                oneOf:
                  - title: GeoJSON Point
                    type: object
                    required:
                      - type
                      - coordinates
                    description: GeoProperty. Geojson reference to the item. Point
                    properties:
                      type:
                        type: string
                        enum:
                          - Point
                      coordinates:
                        type: array
                        minItems: 2
                        items:
                          type: number
                        description: Property. Coordinates of the Point
                      bbox:
                        type: array
                        minItems: 4
                        items:
                          type: number
                        description: Property. BBox of the  Point
                  - title: GeoJSON LineString
                    type: object
                    required:
                      - type
                      - coordinates
                    description: GeoProperty. Geojson reference to the item. LineString
                    properties:
                      type:
                        type: string
                        enum:
                          - LineString
                      coordinates:
                        type: array
                        minItems: 2
                        description: Property. Coordinates of the LineString
                        items:
                          type: array
                          minItems: 2
                          items:
                            type: number
                      bbox:
                        type: array
                        minItems: 4
                        items:
                          type: number
                        description: Property. BBox coordinates of the LineString
                  - title: GeoJSON Polygon
                    type: object
                    required:
                      - type
                      - coordinates
                    description: GeoProperty. Geojson reference to the item. Polygon
                    properties:
                      type:
                        type: string
                        enum:
                          - Polygon
                      coordinates:
                        type: array
                        description: Property. Coordinates of the Polygon
                        items:
                          type: array
                          minItems: 4
                          items:
                            type: array
                            minItems: 2
                            items:
                              type: number
                      bbox:
                        type: array
                        minItems: 4
                        items:
                          type: number
                        description: Property. BBox coordinates of the Polygon
                  - title: GeoJSON MultiPoint
                    type: object
                    required:
                      - type
                      - coordinates
                    description: GeoProperty. Geojson reference to the item. MultiPoint
                    properties:
                      type:
                        type: string
                        enum:
                          - MultiPoint
                      coordinates:
                        type: array
                        description: Property. Coordinates of the MulitPoint
                        items:
                          type: array
                          minItems: 2
                          items:
                            type: number
                      bbox:
                        type: array
                        minItems: 4
                        items:
                          type: number
                        description: Property. BBox coordinates of the LineString
                  - title: GeoJSON MultiLineString
                    type: object
                    required:
                      - type
                      - coordinates
                    description: GeoProperty. Geojson reference to the item. MultiLineString
                    properties:
                      type:
                        type: string
                        enum:
                          - MultiLineString
                      coordinates:
                        type: array
                        description: Property. Coordinates of the MultiLineString
                        items:
                          type: array
                          minItems: 2
                          items:
                            type: array
                            minItems: 2
                            items:
                              type: number
                      bbox:
                        type: array
                        minItems: 4
                        items:
                          type: number
                        description: Property. BBox coordinates of the LineString
                  - title: GeoJSON MultiPolygon
                    type: object
                    required:
                      - type
                      - coordinates
                    description: GeoProperty. Geojson reference to the item. MultiLineString
                    properties:
                      type:
                        type: string
                        enum:
                          - MultiPolygon
                      coordinates:
                        type: array
                        description: Property. Coordinates of the MultiPolygon
                        items:
                          type: array
                          items:
                            type: array
                            minItems: 4
                            items:
                              type: array
                              minItems: 2
                              items:
                                type: number
                      bbox:
                        type: array
                        minItems: 4
                        items:
                          type: number
                description: GeoProperty. Geojson reference to the item. It can be Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon
              address:
                type: object
                description: Property. The mailing address. Model:'https://schema.org/address'
                properties:
                  streetAddress:
                    type: string
                    description: Property. The street address. Model:'https://schema.org/streetAddress'
                  addressLocality:
                    type: string
                    description: Property. The locality in which the street address is, and which is in the region. Model:'https://schema.org/addressLocality'
                  addressRegion:
                    type: string
                    description: Property. The region in which the locality is, and which is in the country. Model:'https://schema.org/addressRegion'
                  addressCountry:
                    type: string
                    description: Property. The country. For example, Spain. Model:'https://schema.org/addressCountry'
                  postalCode:
                    type: string
                    description: Property. The postal code. For example, 24004. Model:'https://schema.org/https://schema.org/postalCode'
                  postOfficeBoxNumber:
                    type: string
                    description: Property. The post office box number for PO box addresses. For example, 03578. Model:'https://schema.org/postOfficeBoxNumber'
                  streetNr:
                    type: string
                    description: Property. Number identifying a specific property on a public street
                  district:
                    type: string
                    description: Property. A district is a type of administrative division that, in some countries, is managed by the local government
              areaServed:
                type: string
                description: Property. The geographic area where a service or offered item is provided. Model:'https://schema.org/Text'
          - type: object
            properties:
              weatherType:
                type: string
                description: Property. Text description of the weather. Model:'http://schema.org/Text'
              visibility:
                description: Property. Model:'http://schema.org/Text'. Categories of visibility
                anyOf:
                  - type: string
                    enum:
                      - veryPoor
                      - poor
                      - moderate
                      - good
                      - veryGood
                      - excellent
                  - type: number
                    minimum: 0
              windDirection:
                type: number
                description: Property. Model:'http://schema.org/Number'. Direction of the wind bet
                minimum: 0
                maximum: 360
              windSpeed:
                type: number
                description: Property. Model:'http//schema.org/Number'. Intensity of the wind
                minimum: 0
              gustSpeed:
                type: number
                description: Property. A sudden burst of high-speed wind over the observed average wind speed lasting only for a few seconds
              refPointOfInterest:
                type: string
                description: Relationship. Model:'http://schema.org/URL'. Point of interest related to the item
              atmosphericPressure:
                type: number
                minimum: 0
                description: Property. Model:'https://schema.org/Number'. The atmospheric pressure observed measured in Hecto Pascals. Units:'Hecto pascals'
              illuminance:
                type: number
                minimum: 0
                description: Property. Model:'https://schema.org/Number'. (https://en.wikipedia.org/wiki/Illuminance) observed measured in lux (lx) or lumens per square metre (cd·sr·m−2). Units:'Lux'
              temperature:
                type: number
                description: Property. Temperature of the item
              feelsLikeTemperature:
                type: number
                description: Property. Temperature appreciation of the item
              relativeHumidity:
                type: number
                minimum: 0
                maximum: 1
                description: Property. Humidity in the Air. Observed instantaneous relative humidity (water vapour in air)
          - properties:
              type:
                type: string
                enum:
                  - WeatherForecast
                description: Property. NGSI Entity type. It has to be WeatherForecast
              dateRetrieved:
                type: string
                format: date-time
                description: Property. Model:'https://schema.org/DateTime'. The date and time the forecast was retrieved in ISO8601 UTC format
              dateIssued:
                type: string
                format: date-time
                description: Property. Model:'https://schema.org/DateTime'. The date and time the forecast was issued by the meteorological bureau in ISO8601 UTC format
              validity:
                type: string
                description: "Property. Model:'https://schema.org/Text'. Includes the validity period for this forecast as a ISO8601 time interval. As a workaround for the lack of support of Orion Context Broker for datetime intervals, it can be used two separate attributes: `validFrom`, `validTo`"
              validFrom:
                type: string
                format: date-time
                description: Property. Model:'https://schema.org/Text'. Validity period start date and time
              validTo:
                type: string
                format: date-time
                description: Property. Model:'https://schema.org/Text'. Validity period end date and time
              dayMaximum:
                type: object
                description: "Property. Model:'https://schema.org/StructuredValue'. Maximum values for the reported period. Subattributes:- `temperature` : Maximum temperature. See `WeatherForecast.temperature` for description and units. - `feelLikesTemperature`. Maximum feels like temperature. Same semantics and units as `WeatherForecast.feelsLikeTemperature`.-   `relativeHumidity`. Maximum relative humidity. Same semantics and units as `WeatherForecast.relativeHumidity`"
                properties:
                  temperature:
                    type: number
                    description: Property. Temperature of the item
                  feelLikesTemperature:
                    type: number
                    description: Property. Temperature appreciation of the item
                  relativeHumidity:
                    type: number
                    minimum: 0
                    maximum: 1
                    description: Property. Humidity in the Air. Observed instantaneous relative humidity (water vapour in air)
              dayMinimum:
                type: object
                description: "Property. Model:'https://schema.org/Text'. Minimum values forecasted for the reported period.  Minimum values for the reported period. Subattributes:- `temperature` : Minimum temperature. See `WeatherForecast.temperature` for description and units. - `feelLikesTemperature`. Minimum feels like temperature. Same semantics and units as `WeatherForecast.feelsLikeTemperature`.- `relativeHumidity`. Minimum relative humidity. Same semantics and units as `WeatherForecast.relativeHumidity`"
                properties:
                  temperature:
                    $ref: "#/properties/data/properties/weather/allOf/3/properties/dayMaximum/properties/temperature"
                  feelLikesTemperature:
                    $ref: "#/properties/data/properties/weather/allOf/3/properties/dayMaximum/properties/feelLikesTemperature"
                  relativeHumidity:
                    $ref: "#/properties/data/properties/weather/allOf/3/properties/dayMaximum/properties/relativeHumidity"
              uVIndexMax:
                type: number
                description: "Property. Model:'https://schema.org/Number'. The maximum UV index for the period, based on the World Health Organization's UV Index measure. Normative references: [http://www.who.int/uv/intersunprogramme/activities/uv_index/en/](http://www.who.int/uv/intersunprogramme/activities/uv_index/en/)"
                minimum: 0
              precipitation:
                type: number
                minimum: 0
                description: Property. Model:'https://schema.org/Number'. Amount of water rain expected. Units:'Liters per square meter'
              precipitationProbability:
                type: number
                minimum: 0
                description: Property. Model:'https://schema.org/Number'. Probability of rainfall.
        required:
          - id
          - type
          - dateIssued
      nhsNumber:
        description: Example patient's NHS Number (accepts canonical or formatted forms).
        examples:
          - "9434765919"
          - 943 476 5919
          - 943-476-5919
        anyOf:
          - $comment: |-
              Canonical stored form: exactly 10 digits (no spaces or hyphens).
              10-digit requirement and check-digit semantics come from the NHS Data Dictionary.
              Ref: NHS Number attribute & algorithm (Modulus 11).
            type: string
            description: NHS Number (10 digits; last digit is a Modulus-11 check digit).
            pattern: ^[0-9]{10}$
            format: nhs-number
            examples:
              - "9434765919"
              - "1234567890"
          - $comment: |-
              UI/ingress tolerant form: allows 3-3-4 with optional spaces/hyphens. Still only digits once separators are removed.
              Display guidance to use 3-3-4 spacing; systems should accept flexible input.
            type: string
            description: Human-entered NHS Number (accepts 3-3-4 with optional spaces or hyphens).
            pattern: ^(?:[0-9]{3}[- ]?[0-9]{3}[- ]?[0-9]{4})$
            format: nhs-number
            examples:
              - 943 476 5919
              - 943-476-5919
              - "9434765919"
    required:
      - nhsNumber
    examples:
      - nhsNumber: "9434765919"
required:
  - type
  - source
  - dataschema
  - data
examples:
  - specversion: "1.0"
    id: 6f1c2a53-3d54-4a0a-9a0b-0e9ae2d4c111
    type: uk.nhs.notify.example.order.read.v1
    source: /data-plane/example
    subject: customer/920fca11-596a-4eca-9c47-99f624614658/order/769acdd4-6a47-496f-999f-76a6fd2c3959/item/4f5e17c0-ec57-4cee-9a86-14580cf5af7d
    time: "2025-10-01T10:15:30.000Z"
    recordedtime: "2025-10-01T10:15:30.250Z"
    traceparent: 00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01
    severitynumber: 1
    severitytext: DEBUG
    dataschema: https://nhsdigital.github.io/nhs-notify-standards/cloudevents/nhs-notify-example-event-data.schema.yaml
    data:
      notify-payload:
        notify-data:
          nhsNumber: "9434765919"
        notify-metadata:
          teamResponsible: Team 1
          notifyDomain: Ordering
$comment: Bundled schema (all external $ref inlined).
$defs: {}
